(this.webpackJsonphommbattle=this.webpackJsonphommbattle||[]).push([[0],{13:function(t,e,a){},14:function(t,e,a){},15:function(t,e,a){"use strict";a.r(e);var i=a(0),n=a.n(i),r=a(3),s=a.n(r),o=(a(13),a(4)),c=a(5),l=a(1),h=a(7),u=a(6),d=(a(14),15),v=11,f=0,p=1,k=2,m=4,b=function(t){Object(h.a)(a,t);var e=Object(u.a)(a);function a(t){var i;return Object(o.a)(this,a),(i=e.call(this,t)).state={markUp:[],field:[],currentUnit:{position:{x:1,y:1},direction:"right",battleSide:"left",size:2,speed:3}},i.svgContainer={width:"61",height:"70",viewBox:"0 0 60.6217782649107 70",path:"M30.31088913245535 0L60.6217782649107 17.5L60.6217782649107 52.5L30.31088913245535 70L0 52.5L0 17.5Z"},i._handleCellClick=i._handleCellClick.bind(Object(l.a)(i)),i._findPath=i._findPath.bind(Object(l.a)(i)),i}return Object(c.a)(a,[{key:"_handleCellClick",value:function(t){if("svg"===t.target.tagName){var e=t.target.dataset,a=+e.col,i=+e.row,n=this.state.field[i-1],r=n[a-1];if(r!==f&&r!==p){var s=this.state.currentUnit,o=s.position.x-a>0?"left":"right";s.size===k&&"left"===s.battleSide&&"right"===o&&n[a]!==m&&a--;var c=Object.assign({},this.state.currentUnit,{position:{x:a,y:i},direction:o});this._findPath(a,i),this.setState({currentUnit:c})}}}},{key:"_findPath",value:function(t,e){}},{key:"_setMovableCells",value:function(t){for(var e=[],a=t,i=this.state.currentUnit,n=i.position,r=i.speed,s=i.battleSide,o=0,c=0;c<=r;c++){var l=n.y+c;l!==n.y&&l%2!==0&&o++;for(var h=0;h<2*r+i.size-c;h++){var u=r+("left"===s?i.size-1:0),p=(h>u?n.x-h+u:n.x+h)-o;e.push("".concat(p," ").concat(l)),l!==l-2*c&&e.push("".concat(p," ").concat(l-2*c))}}return e.forEach((function(t){var e=+t.split(" ")[1],i=+t.split(" ")[0];i>0&&i<=d&&e>0&&e<=v&&a[e-1][i-1]===f&&(a[e-1][i-1]=m)})),a}},{key:"_setVirtualField",value:function(){for(var t=[],e=this.state.currentUnit,a=e.position,i=e.battleSide,n=e.size,r=0;r<v;r++){t.push([]);for(var s=0;s<d;s++)r===a.y-1&&s===a.x-1?(t[r].push(n),n===k&&("left"===i?t[r].push(n):t[r][t[r].length-n]=n)):t[r].push(f)}return t=this._setMovableCells(t)}},{key:"_makeMarkUp",value:function(){for(var t=[],e=this._setVirtualField(),a=1;a<=v;a++){for(var i=[],r="battlefield_row battlefield_row--".concat(a%2===0?"even":"odd"),s=1;s<=d;s++){var o="battlefield_cell";switch(e[a-1][s-1]){case p:case k:o+=" ".concat(o,"--currentUnit");break;case m:o+=" ".concat(o,"--movable")}i.push(n.a.createElement("svg",{key:"cell_".concat(a,"-").concat(s),"data-row":a,"data-col":s,className:o,width:this.svgContainer.width,height:this.svgContainer.height,viewBox:this.svgContainer.viewBox},n.a.createElement("path",{d:this.svgContainer.path})))}t.push(n.a.createElement("div",{key:"row_".concat(a),className:r},i))}return{markUp:t,field:e}}},{key:"componentDidMount",value:function(){this.setState(this._makeMarkUp())}},{key:"componentDidUpdate",value:function(t,e){var a=this.state.currentUnit.position,i=e.currentUnit.position;a.x===i.x&&a.y===i.y||this.setState(this._makeMarkUp())}},{key:"render",value:function(){return n.a.createElement("div",{className:"battleField_main",onClick:this._handleCellClick},this.state.markUp)}}]),a}(n.a.Component);s.a.render(n.a.createElement(b,null),document.getElementById("root"))},8:function(t,e,a){t.exports=a(15)}},[[8,1,2]]]);
//# sourceMappingURL=main.11172e5b.chunk.js.map