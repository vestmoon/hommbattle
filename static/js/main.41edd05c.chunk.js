(this.webpackJsonphommbattle=this.webpackJsonphommbattle||[]).push([[0],{13:function(t,e,a){},14:function(t,e,a){},15:function(t,e,a){"use strict";a.r(e);var i=a(0),n=a.n(i),r=a(3),s=a.n(r),o=(a(13),a(4)),c=a(5),l=a(1),h=a(7),u=a(6),d=(a(14),15),v=11,p=0,f=1,k=4,m=function(t){Object(h.a)(a,t);var e=Object(u.a)(a);function a(t){var i;return Object(o.a)(this,a),(i=e.call(this,t)).state={markUp:[],field:[],currentUnit:{position:{x:15,y:1},direction:"left",battleSide:"right",size:2,speed:3}},i.svgContainer={width:"61",height:"70",viewBox:"0 0 60.6217782649107 70",path:"M30.31088913245535 0L60.6217782649107 17.5L60.6217782649107 52.5L30.31088913245535 70L0 52.5L0 17.5Z"},i._handleCellClick=i._handleCellClick.bind(Object(l.a)(i)),i._findPath=i._findPath.bind(Object(l.a)(i)),i}return Object(c.a)(a,[{key:"_handleCellClick",value:function(t){var e=t.target.dataset,a=+e.col,i=+e.row;if(this.state.field[i-1][a-1]){var n=this.state.currentUnit,r=n.position.x,s=r-a>0?"left":"right";n.size>1&&n.battleSide===s&&1!==a&&Math.abs(a-r)>1&&a--;var o=Object.assign({},this.state.currentUnit,{position:{x:a,y:i},direction:s});this._findPath(a,i),this.setState({currentUnit:o})}}},{key:"_findPath",value:function(t,e){}},{key:"_setMovableCells",value:function(t){for(var e=[],a=t,i=this.state.currentUnit,n=i.position,r=i.speed,s=0,o=0;o<=r;o++){var c=n.y+o;c!==n.y&&c%2!==0&&s++;for(var l=0;l<2*r+i.size-o;l++){var h=r+i.size-1,u=(l>h?n.x-l+h:n.x+l)-s;e.push("".concat(u," ").concat(c)),c!==c-2*o&&e.push("".concat(u," ").concat(c-2*o))}}return e.forEach((function(t){var e=+t.split(" ")[1],i=+t.split(" ")[0];i>0&&i<=d&&e>0&&e<=v&&a[e-1][i-1]===p&&(a[e-1][i-1]=k)})),a}},{key:"_setVirtualField",value:function(){for(var t=[],e=this.state.currentUnit.position,a=0;a<v;a++){t.push([]);for(var i=0;i<d;i++)a===e.y-1&&i===e.x-1?t[a].push(f):t[a].push(p)}return t=this._setMovableCells(t)}},{key:"_makeMarkUp",value:function(){for(var t=[],e=0,a=this._setVirtualField(),i=1;i<=v;i++){for(var r=[],s="battlefield_row battlefield_row--".concat(i%2===0?"even":"odd"),o=1;o<=d;o++){var c="battlefield_cell";switch(a[i-1][o-1]){case 1:c+=" ".concat(c,"--currentUnit"),++e<this.state.currentUnit.size&&(a[i-1][o]=1);break;case 4:c+=" ".concat(c,"--movable")}r.push(n.a.createElement("svg",{key:"cell_".concat(i,"-").concat(o),onClick:this._handleCellClick,"data-row":i,"data-col":o,className:c,width:this.svgContainer.width,height:this.svgContainer.height,viewBox:this.svgContainer.viewBox},n.a.createElement("path",{d:this.svgContainer.path})))}t.push(n.a.createElement("div",{key:"row_".concat(i),className:s},r)),e=0}return{markUp:t,field:a}}},{key:"componentDidMount",value:function(){this.setState(this._makeMarkUp())}},{key:"componentDidUpdate",value:function(t,e){var a=this.state.currentUnit.position,i=e.currentUnit.position;a.x===i.x&&a.y===i.y||this.setState(this._makeMarkUp())}},{key:"render",value:function(){return n.a.createElement("div",{className:"battleField_main"},this.state.markUp)}}]),a}(n.a.Component);s.a.render(n.a.createElement(m,null),document.getElementById("root"))},8:function(t,e,a){t.exports=a(15)}},[[8,1,2]]]);
//# sourceMappingURL=main.41edd05c.chunk.js.map